{{> note_nav}}
<div class="col-sm-9" id='container'>
{{#if notes}}
	<div class="row">
		<div class="col-sm-9">
	                <button class="btn btn-info" onclick="window.location='/student/{{account.id}}/write_note'">写日记</button>
	            </div>
	</div>
	<div class="row">
		<div class="col-sm-9">
	                <br>
	            </div>
	</div>
	
	{{#each notes}}
		  <div class="col-sm-12">
		    <div class="thumbnail">
		      <div class="caption">
		      <div class="row">
		      	<div class="col-sm-3" style="text-align:center">
				<h4>{{title}}</h4>
		       	</div>
			<div class="col-sm-6">
				<p>作者:{{stu_account}}</p><p>编写时间:{{time}}</p>
		       	</div>
		       	<div class="col-sm-2">
		       		<br>
				<button class="btn btn-info noteControl">展开内容</button>
		       	</div>
		      </div>
		      </br>
		       <div class="row note-content" style='display:none'>
			        <div class='col-sm-10 col-sm-offset-1'>
			       	 <p>{{content}}</p>
			        </div>
		       </div>
		     </div>
		    </div>
		  </div>
		
	{{/each}}
	
{{else}}
<div class='row'>
	<div class="col-sm-5">
		<h4>没有日记，我来写一篇吧！</h4>
	</div>
	<div class="col-sm-1">
                <button class="btn btn-info" onclick="window.location='/student/{{account.id}}/write_note'">写日记</button>
            </div>
</div>
{{/if}}
<input type='hidden' id='tag' value='{{tag}}'>
</div>

{{#section 'jquery'}}
	<script>
		$('document').ready(function(){
			$('#header_nav li').eq(2).addClass('active');
			var tag = '#'+$('#tag').val();
			$(tag).addClass('active');
			$('#container').on('click','.noteControl',function(e){
				e.stopPropagation();
				console.log($(this).parents('.thumbnail').eq(0).find('.note-content').eq(0));
				$(this).parents('.thumbnail').eq(0).find('.note-content').eq(0).toggle(500);
				var value = ($(this)[0].innerHTML=='展开内容') ?'收起内容':'展开内容';
				$(this).html(value);
			})
		});
	</script>
{{/section}}